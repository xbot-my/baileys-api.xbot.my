"use strict";(globalThis.webpackChunkbaileys_api_docs=globalThis.webpackChunkbaileys_api_docs||[]).push([[549],{6240(e,n,s){s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>p,frontMatter:()=>i,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"baileys-api/guides/deployment","title":"Deployment","description":"Docker containerized deployment is the only supported method.","source":"@site/../docs/baileys-api/guides/deployment.md","sourceDirName":"baileys-api/guides","slug":"/baileys-api/guides/deployment","permalink":"/docs/baileys-api/guides/deployment","draft":false,"unlisted":false,"editUrl":"https://github.com/xbot-my/baileys-api/edit/main/../docs/baileys-api/guides/deployment.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"slug":"deployment","title":"Deployment","sidebar_position":1},"sidebar":"docs","previous":{"title":"Quick Start","permalink":"/docs/baileys-api/quick-start"},"next":{"title":"Usage Examples","permalink":"/docs/baileys-api/guides/usage"}}');var r=s(4848),o=s(8453);const i={slug:"deployment",title:"Deployment",sidebar_position:1},d="Deployment Guide",a={},l=[{value:"Database Options",id:"database-options",level:2},{value:"Production Deployment",id:"production-deployment",level:2},{value:"Environment Variables",id:"environment-variables",level:3},{value:"Reverse Proxy (nginx)",id:"reverse-proxy-nginx",level:3},{value:"Persistence",id:"persistence",level:3},{value:"Multi-Instance Deployment",id:"multi-instance-deployment",level:2},{value:"Monitoring",id:"monitoring",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"deployment-guide",children:"Deployment Guide"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Docker containerized deployment is the only supported method."})}),"\n",(0,r.jsx)(n.h2,{id:"database-options",children:"Database Options"}),"\n",(0,r.jsx)(n.p,{children:"Choose your preferred database with dedicated compose files:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"File"}),(0,r.jsx)(n.th,{children:"Database"}),(0,r.jsx)(n.th,{children:"Command"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"docker-compose.yml"})}),(0,r.jsx)(n.td,{children:"SQLite (default)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"docker compose up -d"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"docker-compose-pgsql.yml"})}),(0,r.jsx)(n.td,{children:"PostgreSQL 16"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"docker compose -f docker-compose-pgsql.yml up -d"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"docker-compose-mysql.yml"})}),(0,r.jsx)(n.td,{children:"MySQL 8.0"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"docker compose -f docker-compose-mysql.yml up -d"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"docker-compose-mariadb.yml"})}),(0,r.jsx)(n.td,{children:"MariaDB 11.4"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"docker compose -f docker-compose-mariadb.yml up -d"})})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"SQLite"})," is recommended for development and single-instance deployments.\n",(0,r.jsx)(n.strong,{children:"PostgreSQL"})," is recommended for production with multiple instances."]}),"\n",(0,r.jsx)(n.h2,{id:"production-deployment",children:"Production Deployment"}),"\n",(0,r.jsx)(n.h3,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-env",children:"NODE_ENV=production\nAPI_KEY=your-strong-api-key-here\nCORS_ORIGINS=https://yourdomain.com\n\n# Redis (if using external Redis)\nREDIS_HOST=redis.example.com\nREDIS_PASSWORD=your-redis-password\n\n# Database (PostgreSQL example)\nDATABASE_TYPE=postgres\nDATABASE_HOST=postgres.example.com\nDATABASE_PORT=5432\nDATABASE_USERNAME=baileys\nDATABASE_PASSWORD=strong-password\nDATABASE_DATABASE=baileys_api\nDATABASE_SYNCHRONIZE=false\n"})}),"\n",(0,r.jsx)(n.h3,{id:"reverse-proxy-nginx",children:"Reverse Proxy (nginx)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-nginx",children:"server {\n    listen 443 ssl http2;\n    server_name api.example.com;\n\n    ssl_certificate /path/to/cert.pem;\n    ssl_certificate_key /path/to/key.pem;\n\n    location / {\n        proxy_pass http://localhost:3000;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection 'upgrade';\n        proxy_set_header Host $host;\n        proxy_cache_bypass $http_upgrade;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n\n    location /events/ {\n        proxy_pass http://localhost:3000;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \"upgrade\";\n        proxy_set_header Host $host;\n    }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"persistence",children:"Persistence"}),"\n",(0,r.jsx)(n.p,{children:"Ensure these volumes are persisted:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"volumes:\n  baileys_auth_info:  # WhatsApp session data\n  postgres_data:      # Database data\n  redis_data:         # Redis cache\n"})}),"\n",(0,r.jsx)(n.h2,{id:"multi-instance-deployment",children:"Multi-Instance Deployment"}),"\n",(0,r.jsx)(n.p,{children:"For multiple WhatsApp numbers, run separate instances with shared Redis and PostgreSQL:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"# Instance 1\nenvironment:\n  BAILEYS_AUTH_INFO_PATH: /app/instance1_auth\n  REDIS_DB: 0\n\n# Instance 2\nenvironment:\n  BAILEYS_AUTH_INFO_PATH: /app/instance2_auth\n  REDIS_DB: 1\n"})}),"\n",(0,r.jsx)(n.h2,{id:"monitoring",children:"Monitoring"}),"\n",(0,r.jsx)(n.p,{children:"Check health status:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl http://localhost:3000/api/health\n"})}),"\n",(0,r.jsx)(n.p,{children:"Monitor logs:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker compose logs -f api\n"})})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453(e,n,s){s.d(n,{R:()=>i,x:()=>d});var t=s(6540);const r={},o=t.createContext(r);function i(e){const n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);